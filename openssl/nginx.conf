# Define the user that will own and run the Nginx server
# user  nginx;

# Define the number of worker processes; recommended value is the number of
# cores that are being used by your server
# worker_processes  1;

# Define the location on the file system of the error log, plus the minimum
# severity to log messages for
# error_log  /var/log/nginx/error.log warn;

# Define the file that will store the process ID of the main NGINX process
# pid        /var/run/nginx.pid;


# events block defines the parameters that affect connection processing.
events {
    # Define the maximum number of simultaneous connections that can be opened by a worker process
    worker_connections  1024;
}


# http block defines the parameters for how NGINX should handle HTTP web traffic
http {
    # Include the file defining the list of file types that are supported by NGINX
    # include       /etc/nginx/mime.types;

    # Define the default file type that is returned to the user
    # default_type  text/html;

    # Define the format of log messages.
    # log_format  main  '$remote_addr - $remote_user [$time_local] "$request" '
    #                   '$status $body_bytes_sent "$http_referer" '
    #                   '"$http_user_agent" "$http_x_forwarded_for"';
    #
    # Define the location of the log of access attempts to NGINX
    # access_log  /var/log/nginx/access.log  main;

    # Define the timeout value for keep-alive connections with the client
    # keepalive_timeout  65;
  keepalive_timeout 0;
  server_tokens off;  #Hide NGINX server version & Name

  server {
    error_log /var/log/nginx/error.log debug;

    listen 8443 ssl;
    server_name _;

    ssl_protocols TLSv1.3;
    ssl_prefer_server_ciphers off;

    ssl_certificate /cert/server-cert.pem;
    ssl_certificate_key /cert/server-key.pem;

    ssl_client_certificate /cert/root-ca.pem;
    ssl_verify_client on;
    ssl_verify_depth  3;

    location / {
        root   /usr/share/nginx/html;
        index  index.html index.htm;
    }
  }
}
